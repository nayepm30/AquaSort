<main class="pedidos-container">
  <h1 class="heading-1">Cotizaciones Pendientes</h1>

  <div *ngIf="cotizaciones.length > 0" class="orders-grid">
    <div *ngFor="let cotizacion of cotizaciones" class="order-card">
      <div class="order-header">
        <h3>Cotización #{{ cotizacion.idCotizacion }}</h3>
        <span class="order-status" [ngClass]="cotizacion.estatus.toLowerCase()">{{ cotizacion.estatus }}</span>
      </div>
      
      <div class="order-details">
        <div class="detail-row">
          <span>Fecha de cotización:</span>
          <span>{{ formatDate(cotizacion.fecha_creacion) }}</span>
        </div>
        <div class="detail-row">
          <span>Cantidad de productos:</span>
          <span>{{ cotizacion.detalles.length }}</span>
        </div>
        <div class="detail-row">
          <span>Domicilio:</span>
          <span>{{ cotizacion.domicilio }}</span>
        </div>
        <div class="detail-row">
          <span>Tipo de instalación:</span>
          <span>{{ cotizacion.tipo_instalacion }}</span>
        </div>
      </div>

      <div class="response-section">
        <div class="separator-line"></div>
        <div class="response-content">
          <h4>Respuesta:</h4>
          
          <div *ngIf="cotizacion.estatus === 'Pendiente'">
            <p>Estamos procesando tu solicitud, te responderemos pronto.</p>
          </div>
          
          <div *ngIf="cotizacion.estatus === 'Respondida'" class="breakdown">
            <h5>Detalle de costos:</h5>
            <div class="cost-row" *ngFor="let item of cotizacion.detalleCostos">
              <span class="cost-description">{{ item.descripcion }}</span>
              <span class="cost-amount">${{ item.monto | number:'1.2-2' }}</span>
            </div>
            <div class="cost-total">
              <span>Total:</span>
              <span>${{ cotizacion.total | number:'1.2-2' }}</span>
            </div>
            <button class="accept-button" (click)="aceptarCotizacion(cotizacion)">
              Aceptar y comprar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="cotizaciones.length === 0" class="empty-orders">
    <img src="/assets/images/empty-orders.png" alt="No hay cotizaciones">
    <h3>No tienes cotizaciones registradas</h3>
    <a routerLink="/productos" class="btn-shop">Ver Productos</a>
  </div>
</main>